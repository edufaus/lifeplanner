import{S as Ce,i as Ve,s as Te,e as u,t as q,k as b,c as h,a as _,h as U,d as c,m as w,b as v,g as Z,J as t,n as fe,K as Le,L as A,M as F,P as Ne,O as Pe}from"../../chunks/index-a7295f9e.js";import{y as qe,d as Ue,C as He,N as Me,r as Se,l as Re}from"../../chunks/firestore-04138633.js";var Ae={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function $e(a){return a.replace(RegExp("^"+(a.match(/^(\t| )+/)||"")[0],"gm"),"")}function Y(a){return(a+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function _e(a,r){var s,l,e,n,i,T=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,m=[],$="",L=r||{},k=0;function S(p){var E=Ae[p[1]||""],y=m[m.length-1]==p;return E?E[1]?(y?m.pop():m.push(p),E[0|y]):E[0]:p}function d(){for(var p="";m.length;)p+=S(m[m.length-1]);return p}for(a=a.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(p,E,y){return L[E.toLowerCase()]=y,""}).replace(/^\n+|\n+$/g,"");e=T.exec(a);)l=a.substring(k,e.index),k=T.lastIndex,s=e[0],l.match(/[^\\](\\\\)*\\$/)||((i=e[3]||e[4])?s='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+$e(Y(i).replace(/^\n+|\n+$/g,""))+"</code></pre>":(i=e[6])?(i.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),n=_e($e(e[5].replace(/^\s*[>*+.-]/gm,""))),i==">"?i="blockquote":(i=i.match(/\./)?"ol":"ul",n=n.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),s="<"+i+">"+n+"</"+i+">"):e[8]?s='<img src="'+Y(e[8])+'" alt="'+Y(e[7])+'">':e[10]?($=$.replace("<a>",'<a href="'+Y(e[11]||L[l.toLowerCase()])+'">'),s=d()+"</a>"):e[9]?s="<a>":e[12]||e[14]?s="<"+(i="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+_e(e[12]||e[15],L)+"</"+i+">":e[16]?s="<code>"+Y(e[16])+"</code>":(e[17]||e[1])&&(s=S(e[17]||"--"))),$+=l,$+=s;return($+a.substring(k)+d()).replace(/^\n+|\n+$/g,"")}function ke(a,r,s){const l=a.slice();return l[5]=r[s],l}function ye(a){let r,s,l,e,n=a[5].title+"",i,T,m,$=_e(a[5].markdown)+"",L,k,S=a[5].date+"",d,p,E,y=a[5].time+"",K,W;return{c(){r=u("div"),s=u("div"),l=u("div"),e=u("h1"),i=q(n),T=b(),m=u("div"),L=b(),k=u("p"),d=q(S),p=b(),E=u("p"),K=q(y),W=b(),this.h()},l(g){r=h(g,"DIV",{class:!0});var R=_(r);s=h(R,"DIV",{class:!0});var D=_(s);l=h(D,"DIV",{class:!0});var x=_(l);e=h(x,"H1",{});var H=_(e);i=U(H,n),H.forEach(c),T=w(x),m=h(x,"DIV",{class:!0});var G=_(m);G.forEach(c),L=w(x),k=h(x,"P",{});var M=_(k);d=U(M,S),M.forEach(c),p=w(x),E=h(x,"P",{});var X=_(E);K=U(X,y),X.forEach(c),x.forEach(c),D.forEach(c),W=w(R),R.forEach(c),this.h()},h(){v(m,"class","content"),v(l,"class","column"),v(s,"class","rows"),v(r,"class","box")},m(g,R){Z(g,r,R),t(r,s),t(s,l),t(l,e),t(e,i),t(l,T),t(l,m),m.innerHTML=$,t(l,L),t(l,k),t(k,d),t(l,p),t(l,E),t(E,K),t(r,W)},p:fe,d(g){g&&c(r)}}}function Be(a){let r,s,l,e,n,i,T,m,$,L,k,S,d,p,E,y,K,W,g,R,D,x,H,G,M,X,J,se,re,N,Q,oe,ie,O,ce,de,ue,me,j=te,I=[];for(let o=0;o<j.length;o+=1)I[o]=ye(ke(a,j,o));return{c(){r=u("link"),s=b(),l=b(),e=u("div"),n=u("div"),i=u("div"),T=q("Life Planner"),m=b(),$=u("h1"),L=q("The Room Id is "),k=q(B),S=b(),d=u("div"),p=u("h1"),E=q("Create a new Event! "),y=u("b"),K=q("events are permanent"),W=b(),g=u("input"),R=b(),D=u("textarea"),x=b(),H=u("input"),G=b(),M=u("input"),X=b(),J=u("div"),se=q("Create Event"),re=b(),N=u("div"),Q=u("h1"),oe=q("Events"),ie=b(),O=u("div"),ce=q("Update Events"),de=b();for(let o=0;o<I.length;o+=1)I[o].c();this.h()},l(o){r=h(o,"LINK",{href:!0,rel:!0}),s=w(o),Le('[data-svelte="svelte-1ine71f"]',document.head).forEach(c),l=w(o),e=h(o,"DIV",{class:!0});var f=_(e);n=h(f,"DIV",{class:!0});var P=_(n);i=h(P,"DIV",{class:!0});var Ee=_(i);T=U(Ee,"Life Planner"),Ee.forEach(c),m=w(P),$=h(P,"H1",{});var he=_($);L=U(he,"The Room Id is "),k=U(he,B),he.forEach(c),S=w(P),d=h(P,"DIV",{class:!0});var V=_(d);p=h(V,"H1",{});var ve=_(p);E=U(ve,"Create a new Event! "),y=h(ve,"B",{});var ge=_(y);K=U(ge,"events are permanent"),ge.forEach(c),ve.forEach(c),W=w(V),g=h(V,"INPUT",{type:!0,class:!0,placeholder:!0}),R=w(V),D=h(V,"TEXTAREA",{class:!0,placeholder:!0}),_(D).forEach(c),x=w(V),H=h(V,"INPUT",{type:!0}),G=w(V),M=h(V,"INPUT",{type:!0}),X=w(V),J=h(V,"DIV",{class:!0});var Ie=_(J);se=U(Ie,"Create Event"),Ie.forEach(c),V.forEach(c),re=w(P),N=h(P,"DIV",{class:!0});var z=_(N);Q=h(z,"H1",{});var be=_(Q);oe=U(be,"Events"),be.forEach(c),ie=w(z),O=h(z,"DIV",{class:!0});var we=_(O);ce=U(we,"Update Events"),we.forEach(c),de=w(z);for(let pe=0;pe<I.length;pe+=1)I[pe].l(z);z.forEach(c),P.forEach(c),f.forEach(c),this.h()},h(){v(r,"href","~bulma-calendar/dist/css/bulma-calendar.min.css"),v(r,"rel","stylesheet"),document.title="About",v(i,"class","title is-1"),v(g,"type","text"),v(g,"class","input"),v(g,"placeholder","Event Title"),v(D,"class","textarea"),v(D,"placeholder","Event Description (With Markdown)"),v(H,"type","date"),v(M,"type","time"),v(J,"class","button"),v(d,"class","box block"),v(O,"class","button"),v(N,"class",""),v(n,"class","box has-text-centered"),v(e,"class","cont")},m(o,C){Z(o,r,C),Z(o,s,C),Z(o,l,C),Z(o,e,C),t(e,n),t(n,i),t(i,T),t(n,m),t(n,$),t($,L),t($,k),t(n,S),t(n,d),t(d,p),t(p,E),t(p,y),t(y,K),t(d,W),t(d,g),A(g,ee),t(d,R),t(d,D),A(D,ne),t(d,x),t(d,H),A(H,ae),t(d,G),t(d,M),A(M,le),t(d,X),t(d,J),t(J,se),t(n,re),t(n,N),t(N,Q),t(Q,oe),t(N,ie),t(N,O),t(O,ce),t(N,de);for(let f=0;f<I.length;f+=1)I[f].m(N,null);ue||(me=[F(g,"input",a[0]),F(D,"input",a[1]),F(H,"input",a[2]),F(M,"input",a[3]),F(J,"click",Ke),F(O,"click",a[4])],ue=!0)},p(o,[C]){if(C&0&&g.value!==ee&&A(g,ee),C&0&&A(D,ne),C&0&&A(H,ae),C&0&&A(M,le),C&0){j=te;let f;for(f=0;f<j.length;f+=1){const P=ke(o,j,f);I[f]?I[f].p(P,C):(I[f]=ye(P),I[f].c(),I[f].m(N,null))}for(;f<I.length;f+=1)I[f].d(1);I.length=j.length}},i:fe,o:fe,d(o){o&&c(r),o&&c(s),o&&c(l),o&&c(e),Ne(I,o),ue=!1,Pe(me)}}}let B="0";const De=qe(Ue,"events");let te,ae="2013-01-01",le="00:00",ee="",ne="Event Description (With Markdown)";async function Xe({params:a}){return B=a.roomId,isNaN(B)||B.length!=8?{status:302,redirect:"/room/invalidId"}:(te=await xe(B),{})}async function xe(a){let r=[];const s=He(De,Me("roomId","==",a));return(await Se(s)).forEach(e=>{let n=e.data();n.date=new Date(n.date),r.push(n)}),r.sort((e,n)=>e.date-n.date),r}async function Ke(){console.log("createEvent");let a={roomId:B,date:ae,time:le,title:ee,markdown:ne};te.push(a),console.log("roomevents",te),console.log("event",a),await Re(De,a).then(()=>location.reload())}function We(a,r,s){function l(){ee=this.value}function e(){ne=this.value}function n(){ae=this.value}function i(){le=this.value}return[l,e,n,i,async function(){await xe(B)}]}class je extends Ce{constructor(r){super(),Ve(this,r,We,Be,Te,{})}}export{je as default,Xe as load};
